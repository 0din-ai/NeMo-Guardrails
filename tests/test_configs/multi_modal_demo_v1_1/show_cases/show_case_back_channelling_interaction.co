flow backchannelling interaction
  bot inform "First I am going to ask you about your day and will react to keywords such as nice, great or terrible."
  bot inform "Try to answer with a long sentence that contains one of these keywords to see the effect."
  wait 1.0
  bot asks user how the day was

  bot inform "Now I am going to demonstrate how I can dynamically react to other types of inputs. As an example we use a form."
  wait 1.0
  bot asks email address

flow user asked bot to initiate back channelling interaction
  user said "I want to see the back channeling example"
    or user said "can you do the back channeling"

flow user mentioned something sad
  user mentioned "terrible"
    or user mentioned "horrible"
    or user mentioned "bad"

flow user mentioned something nice
  user mentioned "nice"
    or user mentioned "great"
    or user mentioned "perfect"
    or user mentioned "awesome"

flow bot reacts to sad things
  when user mentioned something sad
    bot say "Ohh"
      and bot gesture "shake head"

flow bot reacts to nice things
  when user mentioned something nice
    bot say "Nice"
      and bot gesture "celebrate something going well"

flow bot asks user how the day was
  bot say "How was your day?"
  start bot posture "attentive"
  activate bot reacts to nice things
  activate bot reacts to sad things

  when user said r".*terribl|horribl|bad.*"
    bot say "I hope you are alright now?"
      and bot gesture "looking concerned to the user"
  orwhen user said something
    bot say "Great. And any plans for the rest of the day?"

  user said something
  bot say "Thanks for sharing"


flow bot asks email address
  bot ask "Please enter your email address to continue"
  start VisualFormSceneAction(prompt="Enter your email",inputs=[{"id": "email", "description": "email address", "value" : ""}]) as $action

  while True
    when VisualFormSceneAction.InputUpdated(interim_inputs=[{"id": "email",  "value" : r"@$"}])
        bot say "And now only the domain missing!" and bot gesture "success"
    orwhen VisualFormSceneAction.ConfirmationUpdated()
        bot say "Thank you" and bot gesture "bowing"
        break